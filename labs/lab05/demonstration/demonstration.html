<h1 id="отчет-по-лабораторной-работе-5">Отчет по лабораторной работе
№5</h1>
<h2 id="section"></h2>
<p>Цель работы: Изучение механизмов изменения идентификаторов,
применения SetUID- и Sticky-битов. Получение практических навыков работы
в консоли с дополнительными атрибутами. Рассмотрение работы механизма
смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.</p>
<h2 id="section-1"></h2>
<p>Теоретическое введение</p>
<p>SetUID, SetGID и Sticky - это специальные типы разрешений позволяют
задавать расширенные права доступа на файлы или каталоги. • SetUID (set
user ID upon execution — «установка ID пользователя во время выполнения)
являются флагами прав доступа в Unix, которые разрешают пользователям
запускать исполняемые файлы с правами владельца исполняемого файла. •
SetGID (set group ID upon execution — «установка ID группы во время
выполнения») являются флагами прав доступа в Unix, которые разрешают
пользователям запускать исполняемые файлы с правами группы исполняемого
файла. • Sticky bit в основном используется в общих каталогах, таких как
/var или /tmp, поскольку пользователи могут создавать файлы, читать и
выполнять их, принадлежащие другим пользователям, но не могут удалять
файлы, принадлежащие другим пользователям.</p>
<h2 id="section-2"></h2>
<p>1 часть: Создание программы</p>
<p>Для начала мы убеждаемся, что компилятор gcc установлен, исолпьзуя
команду “gcc -v”. Затем отключаем систему запретов до очередной
перезагрузки системы командой “sudo setenforce 0”, после чего команда
“getenforce” выводит “Permissive”.</p>
<figure>
<img src="image/1.png" style="width:70.0%" alt="Рисунок 1" />
<figcaption aria-hidden="true">Рисунок 1</figcaption>
</figure>
<h2 id="section-3"></h2>
<p>Код программы выглядит следующим образом.</p>
<figure>
<img src="image/4.png" style="width:70.0%" alt="Рисунок 2" />
<figcaption aria-hidden="true">Рисунок 2</figcaption>
</figure>
<h2 id="section-4"></h2>
<p>Скомпилируем программу и убедимся, что файл программы был создан
командой “gcc simpleid.c -o simpleid”. Выполняем программу simpleid
командой “./simpleid”, а затем системную программу id командой “id”.
Результаты, полученные в результате выполнения обеих команд,
совпадают(uid=1001 и gid=1001).</p>
<figure>
<img src="image/5.png" style="width:70.0%" alt="Рисунок 3" />
<figcaption aria-hidden="true">Рисунок 3</figcaption>
</figure>
<h2 id="section-5"></h2>
<p>От имени суперпользователя выполняем команды “sudo chown root:guest
/home/guest/lab05/simpleid2” и “sudo chmod u+s
/home/guest/lab05/simpleid2”, затем выполняем проверку правильности
установки новых атрибутов и смены владельца файла simpleid2 командой
“sudo ls -l /home/guest/lab05/simpleid2”(Рисунок 3.8). Этими командами
была произведена смена пользователя файла на root и установлен
SetUID-бит.</p>
<figure>
<img src="image/8.png" style="width:70.0%" alt="Рисунок 4" />
<figcaption aria-hidden="true">Рисунок 4</figcaption>
</figure>
<h2 id="section-6"></h2>
<p>Запускаем программы simpleid2 и id. Теперь появились различия в
uid.</p>
<figure>
<img src="image/9.png" style="width:70.0%" alt="Рисунок 5" />
<figcaption aria-hidden="true">Рисунок 5</figcaption>
</figure>
<h2 id="section-7"></h2>
<p>Проделаем тоже самое относительно SetGID-бита. Также можем заметить
различия с предыдущим пунктом.</p>
<p><img src="image/10.png" alt="Рисунок 6" /> <img src="image/9.png" />
{ width=70% }</p>
<h2 id="section-8"></h2>
<p>2 часть: Исследование Sticky-бита</p>
<p>Командой “ls -l / | grep tmp” убеждаемся, что атрибут Sticky на
директории /tmp установлен. От имени пользователя guest создаём файл
file01.txt в директории /tmp со словом test командой “echo”test” &gt;
/tmp/file01.txt”. Просматриваем атрибуты у только что созданного файла и
разрешаем чтение и запись для категории пользователей “все остальные”
командами “ls -l /tmp/file01.txt” и “chmod o+rw /tmp/file01.txt”.</p>
<p><img src="image/16.png" alt="Рисунок 7" /> <img src="image/17.png"
style="width:70.0%" /></p>
<h2 id="section-9"></h2>
<p>От имени пользователя guest2 пробуем прочитать файл командой “cat
/tmp/file01.txt” - это удалось. Далее пытаемся дозаписать в файл слово
test2, проверить содержимое файла и записать в файл слово test3, стерев
при этом всю имеющуюся в файле информацию - эти операции удалось
выполнить только в случае, если еще дополнительно разрешить чтение и
запись для группы пользователей командой “chmod g+rw /tmp/file01.txt”.
От имени пользователя guest2 пробуем удалить файл - это не удается ни в
каком из случаев, возникает ошибка.</p>
<figure>
<img src="image/18.png" style="width:70.0%" alt="Рисунок 8" />
<figcaption aria-hidden="true">Рисунок 8</figcaption>
</figure>
<h2 id="section-10"></h2>
<p>Повышаем права до суперпользователя командой “su -” и выполняем
команду, снимающую атрибут t с директории /tmp “chmod -t /tmp”. После
чего покидаем режим суперпользователя командой “exit”. Повторяем
предыдущие шаги. Теперь нам удаётся удалить файл file01.txt от имени
пользователя, не являющегося его владельцем.</p>
<figure>
<img src="image/19.png" style="width:70.0%" alt="Рисунок 9" />
<figcaption aria-hidden="true">Рисунок 9</figcaption>
</figure>
<h2 id="выводы">Выводы</h2>
<ul>
<li>В ходе выполнения данной лабораторной работы я изучил механизмы
изменения идентификаторов, применение SetUID- и Sticky-битов. Получил
практические навыки работы в консоли с дополнительными атрибутами.
Рассмотрел работу механизма смены идентификатора процессов
пользователей, а также влияние бита Sticky на запись и удаление
файлов.</li>
</ul>
